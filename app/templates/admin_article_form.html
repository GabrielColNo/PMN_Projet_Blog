{% extends "base.html" %}

{% block title %}
  {% if action == 'edit' %}
    Edit article - PMN Blog
  {% else %}
    New article - PMN Blog
  {% endif %}
{% endblock %}

{% block content %}
  <section class="admin-header">
    <h2>
      {% if action == 'edit' %}
        Edit article
      {% else %}
        New article
      {% endif %}
    </h2>
    <p><a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary">Back to dashboard</a></p>
  </section>

  {% if action == 'edit' %}
    <form method="post" action="{{ url_for('admin.edit_article', article_id=article.id) }}" class="simple-form">
  {% else %}
    <form method="post" action="{{ url_for('admin.create_article') }}" class="simple-form">
  {% endif %}
      <div class="form-row">
        <label for="title">Title</label>
        <input type="text" id="title" name="title" required
               value="{{ article.title if article is defined and article.title is not none else '' }}" />
      </div>
      <div class="form-row">
        <label for="slug">Slug</label>
        <input type="text" id="slug" name="slug" required
               value="{{ article.slug if article is defined and article.slug is not none else '' }}" />
        <p class="form-help">Used in the URL, e.g. <code>/article/my-slug</code>.</p>
      </div>
      <div class="form-row">
        <label for="content">Content</label>
        <textarea id="content" name="content" rows="10" required>{{ article.content if article is defined and article.content is not none else '' }}</textarea>
      </div>
      <button type="submit" class="btn">
        {% if action == 'edit' %}
          Save changes
        {% else %}
          Create article
        {% endif %}
      </button>
    </form>
{% endblock %}
